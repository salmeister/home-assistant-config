  - platform: template
    sensors:
      school_day:
        friendly_name: "School Day"
        value_template: >-
          {% if not is_state('sensor.plhs_lunch_0', none) %}
            {% if not is_state('sensor.plhs_lunch_0', '') %}
              {% if not is_state('sensor.plhs_lunch_0', 'No School') %}
              on
              {% endif %}
            {% endif %}
          {% endif %}

  - platform: template
    sensors:
      school_night:
        friendly_name: "School Night"
        value_template: >-
          {% if not is_state('sensor.plhs_lunch_1', none) %}
            {% if not is_state('sensor.plhs_lunch_1', '') %}
              {% if not is_state('sensor.plhs_lunch_1', 'No School') %}
              on
              {% endif %}
            {% endif %}
          {% endif %}

  - platform: template
    sensors:
      full_house:
        friendly_name: Full House
        icon_template: >-
          {% if is_state('binary_sensor.full_house','on') %}
            hass:home-account
          {% else %}
            hass:home-outline
          {% endif %}
        value_template: >
          {{ (is_state('input_boolean.andy_absent', 'on') or is_state('person.andy','home'))
            and (is_state('input_boolean.katie_absent', 'on') or is_state('person.katie','home'))
            and (is_state('input_boolean.karlee_absent', 'on') or is_state('person.karlee','home'))
            and (is_state('input_boolean.cam_absent', 'on') or is_state('person.cam','home'))
            and (is_state('input_boolean.maggie_absent', 'on') or is_state('person.maggie','home'))
          }}

  - platform: template
    sensors:
      empty_house:
        friendly_name: Empty House
        icon_template: >-
          {% if is_state('binary_sensor.empty_house','on') %}
            hass:home-outline
          {% else %}
            hass:home-account
          {% endif %}
        value_template: >
          {{ not is_state('person.andy','home')
            and not is_state('person.katie','home')
            and not is_state('person.karlee','home')
            and not is_state('person.cam','home')
            and not is_state('person.maggie','home')
          }}

  - platform: template
    sensors:
      github_updates_available:
        friendly_name: "GitHub Updates Available"
        icon_template: >-
          {% if is_state('binary_sensor.github_updates_available', 'on') %}
            mdi:source-pull
          {% else %}
            mdi:github
          {% endif %}
        value_template: >-
          {{ states('sensor.github_config_updates_available') | int > 0 }}
        attribute_templates:
          commits_behind: "{{ states('sensor.github_config_updates_available') }}"
          last_check: "{{ states('sensor.date_time') }}"

  - platform: template
    sensors:
      github_check_running:
        friendly_name: "GitHub Check Running"
        value_template: >-
          {{ is_state('script.github_check_updates', 'on') }}

  - platform: template
    sensors:
      github_pull_running:
        friendly_name: "GitHub Pull Running"
        value_template: >-
          {{ is_state('script.github_pull_changes', 'on') }}

  - platform: template
    sensors:
      test_sensor:
        friendly_name: "Test Sensor"
        value_template: >-
          {{ is_state('sensor.test_sensor', 'on') }}