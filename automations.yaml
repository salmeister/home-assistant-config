- alias: Dawn Settings
  trigger:
    platform: sun
    event: sunrise
    offset: -00:20:00
  action:
  - service: scene.turn_on
    entity_id: scene.Dawn
  id: 339e07474928412f98de9d594163f0ff
- alias: Dust Settings
  trigger:
    platform: sun
    event: sunset
    offset: +00:15:00
  action:
  - service: scene.turn_on
    entity_id: scene.Dusk
  id: 34d19e4e28744d10bf2eeba67c8c9652
- alias: Karlee home from school
  trigger:
    platform: zone
    entity_id: person.karlee
    zone: zone.home
    event: enter
  condition:
  - condition: time
    weekday:
    - mon
    - tue
    - wed
    - thu
    - fri
  - condition: time
    after: '12:00:00'
    before: '15:00:00'
  - condition: state
    entity_id: automation.karlee_arrived_home
    state: 'off'
  - condition: state
    entity_id: automation.garage_door_opened
    state: 'off'
  - condition: template
    value_template: '{{ states.person.andy.state != ''home'' }}'
  - condition: template
    value_template: '{{ states.person.katie.state != ''home'' }}'
  action:
  - data:
      entity_id: camera.front_porch
      filename: /tmp/fd_snapshot.jpg
    service: camera.snapshot
  - data:
      data:
        images:
        - /tmp/fd_snapshot.jpg
      message: ''
      title: Karlee arrived home.
    service: notify.gmail_text_andy
  - data:
      data:
        images:
        - /tmp/fd_snapshot.jpg
      message: ''
      title: Karlee arrived home.
    service: notify.gmail_text_katie
  - delay: 00:02:00
  - data:
      entity_id: lock.back_door
      condition:
      - condition: state
        entity_id: lock.back_door
        state: unlock
    service: lock.lock
  id: 07083dff1f09444c83666f0cffddbbb2
- alias: Karlee arrived home
  trigger:
    platform: zone
    entity_id: person.karlee
    zone: zone.home
    event: enter
  action:
  - data:
      entity_id: camera.front_porch
      filename: /tmp/fd_snapshot.jpg
    service: camera.snapshot
  - data:
      data:
        images:
        - /tmp/fd_snapshot.jpg
      message: ''
      title: Karlee arrived home.
    service: notify.gmail_text_andy
  - data:
      data:
        images:
        - /tmp/fd_snapshot.jpg
      message: ''
      title: Karlee arrived home.
    service: notify.gmail_text_katie
  id: 46097c1ad34140b0ad2cb3ad55314901
- alias: Garage Door Light
  trigger:
    platform: state
    entity_id: group.garage_doors
    from: closed
  condition:
    condition: or
    conditions:
    - condition: sun
      after: sunset
      after_offset: -00:10:00
    - condition: sun
      before: sunrise
      before_offset: 00:10:00
  action:
  - service: switch.turn_on
    entity_id: switch.garage_lights
  - delay: 00:05:00
  - service: switch.turn_off
    entity_id: switch.garage_lights
  id: bf98fd456dff474d8b10fec42e759697
- alias: Garage door opened
  trigger:
    platform: state
    entity_id: group.garage_doors
    to: open
  action:
  - service: homeassistant.update_entity
    entity_id: person.andy, person.katie
  - condition: and
    conditions:
    - condition: template
      value_template: '{{ states.person.andy.state != ''home'' }}'
    - condition: template
      value_template: '{{ states.person.katie.state != ''home'' }}'
    - condition: time
      weekday:
      - mon
      - tue
      - wed
      - thu
      - fri
    - condition: time
      after: 09:15:00
      before: '16:15:00'
  - data:
      entity_id: camera.front_porch
      filename: /tmp/fd_snapshot.jpg
    service: camera.snapshot
  - data:
      data:
        images:
        - /tmp/fd_snapshot.jpg
      message: ''
      title: The Garage Door Opened.
    service: notify.gmail_text_andy
  id: b903ec6aacd748959d03f2b1d38f2e2d
- alias: Garage Door Left Open While Home Alone
  trigger:
    platform: state
    entity_id: group.garage_doors
    to: open
  condition:
  - condition: state
    state: open
    for:
      minutes: 5
    entity_id: group.garage_doors
  - condition: template
    value_template: '{{ states.person.andy.state != ''home'' }}'
  - condition: template
    value_template: '{{ states.person.katie.state != ''home'' }}'
  action:
  - service: scene.create
    data:
      scene_id: before
      snapshot_entities:
      - media_player.kitchen_hub
      - media_player.basement_mini
      - media_player.upstairs_mini
  - service: tts.google_say
    entity_id: group.tts_endpoints
    data:
      message: The garage door with close in 5 minutes.
  - delay: 00:00:10
  - service: scene.turn_on
    data:
      entity_id: scene.before
  - delay: 00:05:00
  - service: cover.close_cover
    data:
      entity_id: group.garage_doors
  id: af0c4a0821ad44af8e99ac7e98e28964
- alias: Garage Door Left Open At Night
  trigger:
    platform: sun
    event: sunset
    offset: +00:11:00
  condition:
  - condition: state
    state: open
    entity_id: group.garage_doors
  action:
  - service: scene.create
    data:
      scene_id: before
      snapshot_entities:
      - media_player.kitchen_hub
      - media_player.basement_mini
      - media_player.upstairs_mini
  - service: tts.google_say
    entity_id: group.tts_endpoints
    data:
      message: The garage door is still open.
  - delay: 00:00:10
  - service: scene.turn_on
    data:
      entity_id: scene.before
  id: 2bbf188e41aa436fa1ae87e95b341e21
- alias: Armed Mode Turned On
  trigger:
  - platform: state
    entity_id: input_boolean.armed_mode
    from: 'off'
    to: 'on'
  action:
  - service: script.turn_on
    entity_id: script.arm_mode
  id: 09dcf1729c5b402d91119d58aafaddfe
- alias: Armed Mode Turned Off
  trigger:
  - platform: state
    entity_id: input_boolean.armed_mode
    from: 'on'
    to: 'off'
  action:
  - service: script.turn_off
    entity_id: script.arm_mode
  id: 97849ec028fb4d83b666f7d61d10777c
- alias: Garage Door Opened
  trigger:
    platform: state
    entity_id: group.garage_doors
    to: open
  condition:
  - condition: state
    entity_id: input_boolean.armed_mode
    state: 'on'
  action:
  - service: notify.emergency
    data:
      message: The garage door opened.
  id: 7e480896731a4aa6b8ca8832e7548130
- alias: Front Light On At Dusk
  trigger:
    platform: sun
    event: sunset
    offset: +00:12:00
  condition:
  - condition: template
    value_template: '{{ now().month != 12 }}'
  - condition: state
    entity_id: switch.front_lights
    state: 'off'
  action:
  - service: switch.turn_on
    entity_id: switch.front_lights
  id: 8b54a454511145a9b93de61098a20d2f
- alias: Front Light On Before School
  trigger:
    platform: time
    at: 06:11:00
  condition:
  - condition: template
    value_template: '{{ not is_state(''sensor.twin_oaks_lunch_0'', "") }}'
  - condition: sun
    before: sunrise
    before_offset: -00:30:00
  - condition: state
    entity_id: switch.front_lights
    state: 'off'
  action:
  - service: switch.turn_on
    entity_id: switch.front_lights
  id: 3bed45ae773b44a5b9e8aa8a23cac1b8
- alias: Front Light Off if at Home
  trigger:
    platform: time
    at: '23:30:00'
  condition:
  - condition: state
    entity_id: switch.front_lights
    state: 'on'
  - condition: state
    entity_id: person.andy
    state: home
  - condition: state
    entity_id: person.katie
    state: home
  - condition: state
    entity_id: person.karlee
    state: home
  - condition: state
    entity_id: person.cam
    state: home
  action:
  - service: switch.turn_off
    entity_id: switch.front_lights
  id: a383d40c460b4dc8addc7d1251ff2f67
- alias: Christmas Tree On Weekday
  trigger:
    platform: time
    at: 07:00:00
  condition:
    condition: state
    entity_id: binary_sensor.workday
    state: 'on'
  action:
  - service: switch.turn_on
    entity_id: switch.christmas_tree
  - service: switch.turn_on
    entity_id: switch.seasonal_plug_2
  id: 12254f9dbe8846558b2070ec3a723036
- alias: Christmas Tree On Weekends
  trigger:
    platform: time
    at: 08:00:00
  condition:
    condition: state
    entity_id: binary_sensor.workday
    state: 'off'
  action:
  - service: switch.turn_on
    entity_id: switch.christmas_tree
  - service: switch.turn_on
    entity_id: switch.seasonal_plug_2
  id: fc8165e67f0f423b9d6ca5e7f1c1c30e
- alias: Christmas Tree Off AM
  trigger:
    platform: time
    at: '10:00:00'
  action:
  - service: switch.turn_off
    entity_id: switch.christmas_tree
  - service: switch.turn_off
    entity_id: switch.seasonal_plug_2
  id: f87c2d72293c4b26b5bc7150a8495111
- alias: Christmas Tree On PM
  trigger:
    platform: time
    at: '16:45:00'
  action:
  - service: switch.turn_on
    entity_id: switch.christmas_tree
  - service: switch.turn_on
    entity_id: switch.seasonal_plug_2
  id: 5f606b03f76c42beba2335905719c40e
- alias: Foyer Light On
  trigger:
    platform: sun
    event: sunset
    offset: +00:14:00
  action:
  - service: light.turn_on
    data:
      entity_id: light.foyer
      brightness: 45
  - condition: and
    conditions:
    - condition: template
      value_template: '{{ states.person.andy.state != ''home'' }}'
    - condition: template
      value_template: '{{ states.person.katie.state != ''home'' }}'
    - condition: template
      value_template: '{{ states.person.karlee.state != ''home'' }}'
    - condition: template
      value_template: '{{ states.person.cam.state != ''home'' }}'
  - service: light.turn_on
    data:
      entity_id: light.foyer
      brightness: 210
  id: facf0ac6c44940109b5b2ed101375837
- alias: Foyer Light Dim
  trigger:
    platform: time
    at: '23:59:00'
  condition:
    condition: and
    conditions:
    - condition: template
      value_template: '{{ states.person.andy.state != ''home'' }}'
    - condition: template
      value_template: '{{ states.person.katie.state != ''home'' }}'
    - condition: template
      value_template: '{{ states.person.karlee.state != ''home'' }}'
    - condition: template
      value_template: '{{ states.person.cam.state != ''home'' }}'
  action:
    service: light.turn_on
    data:
      entity_id: light.foyer
      brightness: 50
  id: cb1bbfcc94dc43749d8418cbc5a212a1
- alias: Foyer Light Off if Home
  trigger:
    platform: time
    at: '21:00:00'
  condition:
    condition: and
    conditions:
    - condition: state
      entity_id: light.foyer
      state: 'on'
    - condition: or
      conditions:
      - condition: state
        entity_id: person.andy
        state: home
      - condition: state
        entity_id: person.katie
        state: home
      - condition: state
        entity_id: person.karlee
        state: home
      - condition: state
        entity_id: person.cam
        state: home
  action:
    service: light.turn_off
    entity_id: light.foyer
  id: 9dfa5fa2e8544526bb9345387b1c59a6
- alias: Lock Doors for the Night
  trigger:
    platform: time
    at: '23:59:00'
  condition:
  - condition: state
    entity_id: lock.back_door
    state: unlocked
  action:
    service: lock.lock
    entity_id: lock.back_door
  id: 91730d5823e84ba3a06a6f15bebcbac1
- alias: Lock Door When Home Alone
  trigger:
  - platform: zone
    entity_id: person.andy
    zone: zone.home
    event: leave
  - platform: zone
    entity_id: person.katie
    zone: zone.home
    event: leave
  condition:
  - condition: time
    before: '23:30:00'
  - condition: template
    value_template: '{{ states.person.andy.state != ''home'' }}'
  - condition: template
    value_template: '{{ states.person.katie.state != ''home'' }}'
  - condition: state
    entity_id: lock.back_door
    state: unlocked
  action:
  - delay: 00:00:60
  - condition: template
    value_template: '{{ states.person.andy.state != ''home'' }}'
  - condition: template
    value_template: '{{ states.person.katie.state != ''home'' }}'
  - service: lock.lock
    entity_id: lock.back_door
  id: 97d60c81420a458e9449957382c2548a
- alias: UnLock Door When Andy or Katie Arrive
  trigger:
  - platform: zone
    entity_id: person.andy
    zone: zone.home
    event: enter
  - platform: zone
    entity_id: person.katie
    zone: zone.home
    event: enter
  condition:
  - condition: time
    before: '23:30:00'
  - condition: state
    entity_id: lock.back_door
    state: locked
  action:
    service: lock.unlock
    entity_id: lock.back_door
  id: ab204ff9af6f4df2925601db0e9baf29
- id: 58504e66d5674cabb654d27d638af17b
  alias: Low Temp in Basement
  trigger:
  - platform: numeric_state
    entity_id: sensor.firefighter_air_temperature
    below: 55
    for:
      minutes: 5
  action:
  - service: notify.emergency
    data:
      message: Low Temp detected in the basement.
  - service: scene.create
    data:
      scene_id: before
      snapshot_entities:
      - media_player.kitchen_hub
      - media_player.basement_mini
      - media_player.upstairs_mini
  - service: tts.google_say
    entity_id: group.tts_endpoints
    data:
      message: Low Temp detected in the basement.
  - delay: 00:00:10
  - service: scene.turn_on
    data:
      entity_id: scene.before
  mode: single
- alias: Low Temp on Main Floor
  trigger:
  - platform: numeric_state
    entity_id: sensor.laundry_leak_air_temperature
    below: 55
    for:
      minutes: 5
  action:
  - service: notify.emergency
    data:
      message: Low Temp detected in the laundry room.
  - service: scene.create
    data:
      scene_id: before
      snapshot_entities:
      - media_player.kitchen_hub
      - media_player.basement_mini
      - media_player.upstairs_mini
  - service: tts.google_say
    entity_id: group.tts_endpoints
    data:
      message: Low Temp detected in the laundry room.
  - delay: 00:00:10
  - service: scene.turn_on
    data:
      entity_id: scene.before
  id: 74fbfdf16c0543ff98596e8288316912
- id: 117da4c1812d453d981c186ca07f21ac
  alias: Water Detected in Basement
  trigger:
  - platform: state
    entity_id: binary_sensor.basement_leak_water
    from: 'off'
    to: 'on'
  action:
  - service: notify.emergency
    data:
      message: Water detected in the basement.
  - service: scene.create
    data:
      scene_id: before
      snapshot_entities:
      - media_player.kitchen_hub
      - media_player.basement_mini
      - media_player.upstairs_mini
  - service: tts.google_say
    entity_id: group.tts_endpoints
    data:
      message: Water detected in the basement.
  - delay: 00:00:10
  - service: scene.turn_on
    data:
      entity_id: scene.before
  mode: single
- id: 8a71726e99574cf09627a8950829a762
  alias: Water Detected near Fridge
  trigger:
  - platform: state
    entity_id: binary_sensor.fridge_leak_water
    to: 'on'
    from: 'off'
  action:
  - service: notify.emergency
    data:
      message: The ice maker is leaking.
  - service: scene.create
    data:
      scene_id: before
      snapshot_entities:
      - media_player.kitchen_hub
      - media_player.basement_mini
      - media_player.upstairs_mini
  - service: tts.google_say
    entity_id: group.tts_endpoints
    data:
      message: The ice maker is leaking.
  - delay: 00:00:10
  - service: scene.turn_on
    data:
      entity_id: scene.before
  mode: single
- id: cd8c5de487e14aaaa3d2e7ad7fc200b8
  alias: Water Detected in Laundry Room
  trigger:
  - platform: state
    entity_id: binary_sensor.laundry_leak_water
    from: 'off'
    to: 'on'
  action:
  - service: notify.emergency
    data:
      message: Water detected in the laundry room.
  - service: scene.create
    data:
      scene_id: before
      snapshot_entities:
      - media_player.kitchen_hub
      - media_player.basement_mini
      - media_player.upstairs_mini
  - service: tts.google_say
    entity_id: group.tts_endpoints
    data:
      message: Water detected in the laundry room.
  - delay: 00:00:10
  - service: scene.turn_on
    data:
      entity_id: scene.before
  mode: single
- alias: Fire Alarm
  trigger:
  - platform: state
    entity_id: binary_sensor.firefighter_smoke_alarm_smoke_detected
    from: 'off'
    to: 'on'
  action:
  - service: notify.emergency
    data:
      message: The fire alarm is going off!
  - service: scene.create
    data:
      scene_id: before
      snapshot_entities:
      - media_player.kitchen_hub
      - media_player.basement_mini
      - media_player.upstairs_mini
  - service: tts.google_say
    entity_id: group.tts_endpoints
    data:
      message: Fire! Fire! Fire!
  - delay: 00:00:10
  - service: scene.turn_on
    data:
      entity_id: scene.before
  id: 3299820bd1fb4ba898026043614260f4
- alias: Carbon Dioxide Alarm
  trigger:
  - platform: state
    entity_id: binary_sensor.firefighter_co_alarm_carbon_monoxide_detected
    from: 'off'
    to: 'on'
  action:
  - service: notify.emergency
    data:
      message: Carbon Dioxide has been detected. Get out!
  - service: scene.create
    data:
      scene_id: before
      snapshot_entities:
      - media_player.kitchen_hub
      - media_player.basement_mini
      - media_player.upstairs_mini
  - service: tts.google_say
    entity_id: group.tts_endpoints
    data:
      message: Carbon Dioxide has been detected. Get out!
  - delay: 00:00:10
  - service: scene.turn_on
    data:
      entity_id: scene.before
  id: eb2cc90735a342a48c7e0f22b8e23e5f
- alias: Washer Done
  trigger:
  - platform: state
    entity_id: binary_sensor.washing_machine_status
    from: 'on'
    to: 'off'
  action:
  - service: scene.create
    data:
      scene_id: before
      snapshot_entities:
      - media_player.kitchen_hub
      - media_player.basement_mini
      - media_player.upstairs_mini
  - service: tts.google_say
    entity_id: group.tts_endpoints
    data:
      message: The washing machine is done.
  - delay: 00:00:10
  - service: scene.turn_on
    data:
      entity_id: scene.before
  id: 936744a235ac43f78bc16cf5cb507e6e
- alias: Dryer Done
  trigger:
  - platform: state
    entity_id: binary_sensor.dryer_status
    from: 'on'
    to: 'off'
  action:
  - service: scene.create
    data:
      scene_id: before
      snapshot_entities:
      - media_player.kitchen_hub
      - media_player.basement_mini
      - media_player.upstairs_mini
  - service: tts.google_say
    entity_id: group.tts_endpoints
    data:
      message: The dryer is almost done.
  - delay: 00:00:10
  - service: scene.turn_on
    data:
      entity_id: scene.before
  id: 3890066b7c124a3fa5ca1f5d0ffcc782
- alias: Water Softener Low
  trigger:
  - platform: numeric_state
    entity_id: sensor.salt_level_percent
    below: 35
  action:
  - service: notify.gmail_email_andy
    data:
      message: Time to go buy 4 bags of water softener salt.
      title: Water softener salt is low.
  id: 89505984bd644e09b890af787c915437
- alias: Sump Level
  trigger:
  - platform: numeric_state
    entity_id: sensor.sump_level
    above: 13
    for:
      seconds: 125
  action:
  - service: notify.emergency
    data:
      message: Water is rising in the sump basin!
  - service: scene.create
    data:
      scene_id: before
      snapshot_entities:
      - media_player.kitchen_hub
      - media_player.basement_mini
      - media_player.upstairs_mini
  - service: tts.google_say
    entity_id: group.tts_endpoints
    data:
      message: Water is rising in the sump basin!
  - delay: 00:00:10
  - service: scene.turn_on
    data:
      entity_id: scene.before
  id: e7f95523f1054b7488368f9d2928dbb4
- alias: Tire Rotation
  trigger:
  - platform: template
    value_template: '{{ states(''sensor.odometer'') |int > states(''input_text.tire_rotation'')|
      int}}'
  action:
  - service: notify.gmail_email_andy
    data:
      message: Time to rotate the truck tires. The next tire rotation is due at {{
        states('input_text.tire_rotation') }} and the odometer is reporting {{ states('sensor.odometer')
        }}.
      title: Tire Rotation Needed.
  id: 10b0750e36ad4095b2b83663c4d43022
- alias: Oil Change
  trigger:
  - platform: template
    value_template: '{{ states(''sensor.odometer'') |int > states(''input_text.oil_change'')|
      int}}'
  action:
  - service: notify.gmail_email_andy
    data:
      message: The next oil change is due at {{ states('input_text.oil_change') }}
        and the odometer is reporting {{ states('sensor.odometer') }}. Time to change
        the oil in the truck. Pick up 7 liters of OReiley 5W-20 full-synthetic and
        a WIX 57060XP filter.
      title: Oil Change Needed.
  id: 089e55235e614ec8abd93177e62af4a4
- alias: Front Closet Door On
  trigger:
  - platform: state
    entity_id: binary_sensor.front_closet_door
    from: 'off'
    to: 'on'
  action:
  - service: light.turn_on
    entity_id: light.front_closet
  id: 247ddc55cf5b48fab20aa06ebfcfd7e7
- alias: Front Closet Door Off
  trigger:
  - platform: state
    entity_id: binary_sensor.front_closet_door
    from: 'on'
    to: 'off'
  action:
  - service: light.turn_off
    entity_id: light.front_closet
  id: e5b545386ac24f57a45350ad6e7b1eec
- alias: Front Closet Light
  trigger:
  - platform: state
    entity_id: light.front_closet
    from: 'off'
    to: 'on'
    for:
      minutes: 5
  action:
  - service: light.turn_off
    entity_id: light.front_closet
  id: c7080e7a39134bc7bbe0c3d3771db508
- alias: Update Bedtime
  trigger:
  - platform: time
    at: 06:00:00
  - platform: time
    at: 08:00:00
  - platform: time
    at: '22:30:00'
  - platform: time
    at: '23:30:00'
  - platform: homeassistant
    event: start
  action:
    service: "{% set minutes = ((now().strftime('%H') | int) * 60) + (now().strftime('%M')\
      \ | int) %} {% if (360 <= minutes < 1410) and (is_state('sensor.dayoftheweek',\
      \ 'Friday')) %}\n  input_boolean.turn_off\n{% elif (480 <= minutes < 1410) and\
      \ (is_state('sensor.dayoftheweek', 'Saturday')) %}\n  input_boolean.turn_off\
      \ \n{% elif (480 <= minutes < 1350) and (is_state('sensor.dayoftheweek', 'Sunday'))\
      \ %}\n  input_boolean.turn_off \n{% elif (360 <= minutes < 1350) and ((is_state('sensor.dayoftheweek',\
      \ 'Monday')) or (is_state('sensor.dayoftheweek', 'Tuesday')) or (is_state('sensor.dayoftheweek',\
      \ 'Wednesday')) or (is_state('sensor.dayoftheweek', 'Thursday'))) %}\n  input_boolean.turn_off\
      \ \n{% else %}\n  input_boolean.turn_on\n{% endif %}\n"
    entity_id: input_boolean.bedtime
  id: 99d6e8b097a74eb1a12867c415500bcd
- alias: Crock-Pot On
  trigger:
    platform: template
    value_template: '{{ states(''input_datetime.crock_pot_start_time'') == states(''sensor.time'')+'':00''
      }}'
  condition:
    condition: and
    conditions:
    - condition: time
      after: 00:00:05
    - condition: time
      before: '23:59:55'
  action:
  - service: switch.turn_on
    entity_id: switch.crock_pot
  - service: input_datetime.set_datetime
    data:
      entity_id: input_datetime.crock_pot_start_time
      time: 00:00
  id: c7208b98b0e9474a97ccbe9bd71d8473
- alias: Dishwasher Done
  trigger:
  - platform: state
    entity_id: binary_sensor.dishwasher_status
    from: 'on'
    to: 'off'
  action:
  - service: input_boolean.turn_on
    entity_id: input_boolean.unload_dishwasher
  id: d05b1353782f4bab862635a9d82a9b8e
- alias: Karlee Alarm
  trigger:
  - platform: template
    value_template: '{{ states(''input_datetime.karlee_alarm_start_time'') == states(''sensor.time'')+'':00''
      }}'
  condition:
  - condition: state
    entity_id: input_boolean.karlee_alarm
    state: 'on'
  action:
  - service: light.turn_on
    data:
      entity_id: light.karlee_ball_light
      rgb_color:
      - 255
      - 0
      - 0
      white_value: 0
      brightness: 130
      transition: 30
  - delay: 33
  - service: light.turn_on
    data:
      entity_id: light.karlee_ball_light
      rgb_color:
      - 255
      - 255
      - 0
      white_value: 0
      brightness: 170
      transition: 30
  - delay: 33
  - service: light.turn_on
    data:
      entity_id: light.karlee_ball_light
      rgb_color:
      - 255
      - 255
      - 255
      white_value: 0
      brightness: 255
      transition: 30
  - delay: 33
  - service: switch.turn_on
    entity_id: switch.karlee_string_lights
  - service: light.turn_on
    data:
      entity_id: light.karlee_ball_light
      rgb_color:
      - 255
      - 255
      - 255
      white_value: 255
      brightness: 255
      transition: 30
  - delay: 120
  - service: light.turn_off
    entity_id: light.karlee_ball_light
  - service: switch.turn_off
    entity_id: switch.karlee_string_lights
  id: 85dfc29419694585a4596bc8307332b9
- alias: Hassio Startup
  trigger:
  - platform: homeassistant
    event: start
  action:
  - delay: 00:05:00
  - service: homeassistant.update_entity
    entity_id: sensor.plhs_lunch_0, sensor.plhs_lunch_1, sensor.plhs_lunch_2, sensor.plhs_lunch_3,
      sensor.plhs_lunch_4, sensor.plhs_lunch_5, sensor.twin_oaks_lunch_0, sensor.twin_oaks_lunch_1,
      sensor.twin_oaks_lunch_2, sensor.twin_oaks_lunch_3, sensor.twin_oaks_lunch_4,
      sensor.twin_oaks_lunch_5, sensor.glendale_lunch_0, sensor.glendale_lunch_1,
      sensor.glendale_lunch_2, sensor.glendale_lunch_3, sensor.glendale_lunch_4, sensor.glendale_lunch_5,
      sensor.water_softener_salt_level, binary_sensor.updater
  - service: mqtt.publish
    data:
      topic: "OpenZWave/1/command/enablepoll/"
      payload: "{\"ValueIDKey\":172572688,\"Intensity\":1}"
  - service: mqtt.publish
    data:
      topic: "OpenZWave/1/command/enablepoll/"
      payload: "{\"ValueIDKey\":340344848,\"Intensity\":1}"
  - service: mqtt.publish
    data:
      topic: "OpenZWave/1/command/enablepoll/"
      payload: "{\"ValueIDKey\":206127120,\"Intensity\":1}"
  - service: mqtt.publish
    data:
      topic: "OpenZWave/1/command/enablepoll/"
      payload: "{\"ValueIDKey\":189349904,\"Intensity\":1}"
  id: f9cc911c1d7c4d64b949869284942c52
- alias: Cooldown Router
  trigger:
    platform: numeric_state
    entity_id: sensor.router_temp
    above: 75
  action:
  - service: switch.turn_on
    entity_id: switch.router_fan
  - delay: 00:15:00
  - service: switch.turn_off
    entity_id: switch.router_fan
  id: e2a5671b4b5043139860284288cbfb28
- alias: Router Cooled Down
  trigger:
    platform: numeric_state
    entity_id: sensor.router_temp
    below: 59
  action:
  - service: switch.turn_off
    entity_id: switch.router_fan
  id: 7570ac1bb967465cb5e2bbf8749efe44
- alias: Morning Dog Food Check
  trigger:
    platform: time
    at: 08:45:00
  condition:
  - condition: template
    value_template: '{% if (as_timestamp(now())-as_timestamp(states.binary_sensor.dog_food.attributes.timestamp))
      > 10800 %}true{% endif %}'
  action:
  - service: tts.google_say
    entity_id: group.tts_endpoints
    data:
      message: The dogs need to be fed.
  id: 1da1d24653fb4f67a4aa3bc536fc1ca2
- alias: Evening Dog Food Check
  trigger:
    platform: time
    at: '19:00:00'
  condition:
  - condition: template
    value_template: '{% if (as_timestamp(now())-as_timestamp(states.binary_sensor.dog_food.attributes.timestamp))
      > 10800 %}true{% endif %}'
  action:
  - service: tts.google_say
    entity_id: group.tts_endpoints
    data:
      message: The dogs need to be fed.
  id: 437cbcbe22f840eeb7d4360cbbd3a7c1
- alias: Dogs Already Fed Check
  trigger:
  - platform: state
    entity_id: binary_sensor.dog_food
    from: 'off'
    to: 'on'
  condition:
  - condition: template
    value_template: '{% set fromSecs = as_timestamp(trigger.from_state.attributes.timestamp)
      %} {% set nowSecs = as_timestamp(now()) %} {{ (nowSecs - fromSecs) < 10800 and
      (nowSecs - fromSecs) > 60 }}'
  action:
  - service: tts.google_say
    entity_id: media_player.kitchen_hub
    data:
      message: The dogs may have already been fed.
  id: b1181b134261492db210649c6bd52831
- id: '1603748600126'
  alias: Andy Phone Charged
  description: ''
  trigger:
  - type: battery_level
    platform: device
    device_id: 239e51ad72054821af27a25a1aa1c73a
    entity_id: sensor.battery_level
    domain: sensor
    above: 99
  condition: []
  action:
  - type: turn_off
    device_id: 06114d6717d411eb89d5f1d857a67716
    entity_id: switch.andy_phone_charger
    domain: switch
  mode: single
- id: '1603748661392'
  alias: Andy Phone Needs Charging
  description: ''
  trigger:
  - type: battery_level
    platform: device
    device_id: 239e51ad72054821af27a25a1aa1c73a
    entity_id: sensor.battery_level
    domain: sensor
    below: 45
    for:
      hours: 0
      minutes: 10
      seconds: 0
  condition: []
  action:
  - type: turn_on
    device_id: 06114d6717d411eb89d5f1d857a67716
    entity_id: switch.andy_phone_charger
    domain: switch
  mode: single
- id: '1608167974470'
  alias: Master Bath Night Light On
  description: ''
  trigger:
  - platform: state
    entity_id: binary_sensor.master_bath_pir
    to: 'on'
  condition:
  - condition: state
    entity_id: input_boolean.bedtime
    state: 'on'
  action:
  - type: turn_on
    device_id: ac8264c7aa4531771e577e34188e3bf1
    entity_id: switch.master_night_light
    domain: switch
  mode: single
- id: '1608168046776'
  alias: Master Bath Night Light Off
  description: ''
  trigger:
  - platform: state
    entity_id: binary_sensor.master_bath_pir
    to: 'off'
    from: 'on'
    for: 0:01:00
  condition: []
  action:
  - type: turn_off
    device_id: 31e7047e3fee02c9c54bf6bc16e867a9
    entity_id: switch.master_night_light
    domain: switch
  mode: single
- id: '1608237220910'
  alias: Unload Dishwasher Reminder
  description: ''
  trigger:
  - platform: time
    at: '14:30'
  - platform: time
    at: '16:30'
  condition:
  - condition: state
    entity_id: input_boolean.unload_dishwasher
    state: 'on'
  action:
  - service: tts.google_say
    data:
      entity_id: group.tts_endpoints
      message: Time to unload the dishwasher.
  - condition: time
    after: '16:29'
  - service: input_boolean.turn_off
    data: {}
    entity_id: input_boolean.unload_dishwasher
  mode: single
- id: '1608478656088'
  alias: Bedtime Turned On
  description: ''
  trigger:
  - platform: state
    entity_id: input_boolean.bedtime
    from: 'off'
    to: 'on'
  condition: []
  action:
  - service: light.turn_off
    data: {}
    entity_id: light.foyer
  - service: switch.turn_off
    data:
      entity_id:
      - switch.porch_light
      - switch.deck_lights
      - switch.garage_lights
      - switch.seasonal_plug_2
      - switch.christmas_tree
  - service: cover.close_cover
    data:
      entity_id:
      - cover.garage_door
      - cover.third_stall
  mode: single
